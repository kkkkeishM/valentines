<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hi bubbba! ğŸ’•</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’•</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Playfair+Display:wght@400;700&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Moon -->
    <div class="moon">
        <div class="crater crater-1"></div>
        <div class="crater crater-2"></div>
        <div class="crater crater-3"></div>
        <div class="crater crater-4"></div>
        <div class="crater crater-5"></div>
    </div>

    <!-- Stars background -->
    <div class="stars" id="stars"></div>

    <!-- Floating particles -->
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- PAGE 0: Landing with Roses -->
    <div class="page active" id="landing-page">
        <div class="landing-container">
            <div class="roses-container">
                <!-- Left Rose -->
                <div class="rose left">
                    <div class="stem"></div>
                    <div class="leaf leaf-1"></div>
                    <div class="leaf leaf-2"></div>
                    
                    <div class="flower">
                        <div class="petal-layer petal-layer-1">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="petal-layer petal-layer-2">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="petal-layer petal-layer-3">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="flower-center"></div>
                    </div>
                </div>

                <!-- Center Rose (Bigger) -->
                <div class="rose center">
                    <div class="stem"></div>
                    <div class="leaf leaf-1"></div>
                    <div class="leaf leaf-2"></div>
                    
                    <div class="flower">
                        <div class="petal-layer petal-layer-1">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="petal-layer petal-layer-2">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="petal-layer petal-layer-3">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="flower-center"></div>
                    </div>
                </div>

                <!-- Right Rose -->
                <div class="rose right">
                    <div class="stem"></div>
                    <div class="leaf leaf-1"></div>
                    <div class="leaf leaf-2"></div>
                    
                    <div class="flower">
                        <div class="petal-layer petal-layer-1">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="petal-layer petal-layer-2">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="petal-layer petal-layer-3">
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                            <div class="petal"></div>
                        </div>
                        <div class="flower-center"></div>
                    </div>
                </div>

                <!-- Sparkles around roses -->
                <div class="sparkle" style="left: 10%; bottom: 280px; animation-delay: 3.5s;"></div>
                <div class="sparkle" style="left: 25%; bottom: 320px; animation-delay: 4s;"></div>
                <div class="sparkle" style="right: 25%; bottom: 340px; animation-delay: 4.5s;"></div>
                <div class="sparkle" style="right: 10%; bottom: 300px; animation-delay: 5s;"></div>
                <div class="sparkle" style="left: 50%; bottom: 360px; animation-delay: 3.8s;"></div>
            </div>

            <div class="message">For Someone Special...</div>
            
            <button class="continue-btn" onclick="goToQuestion()">
                <span>Continue ğŸ’•</span>
            </button>
        </div>
    </div>

    <!-- PAGE 1: Question -->
    <div class="page" id="question-page">
        <!-- Floating hearts background -->
        <div class="heart-bg" style="top: 10%; left: 10%; animation-delay: 0s;">ğŸ’•</div>
        <div class="heart-bg" style="top: 20%; right: 15%; animation-delay: 2s;">ğŸ’“</div>
        <div class="heart-bg" style="bottom: 15%; left: 20%; animation-delay: 4s;">ğŸ’—</div>
        <div class="heart-bg" style="bottom: 25%; right: 10%; animation-delay: 1s;">ğŸ’–</div>
        <div class="heart-bg" style="top: 50%; left: 5%; animation-delay: 3s;">ğŸ’</div>
        <div class="heart-bg" style="top: 40%; right: 5%; animation-delay: 5s;">ğŸ’›</div>
        <div class="heart-bg" style="top: 60%; left: 50%; animation-delay: 6s;">ğŸ’</div>
        <div class="heart-bg" style="bottom: 40%; right: 30%; animation-delay: 7s;">ğŸ’˜</div>

        <div class="container">
            <div id="question-content">
                <div class="card-decoration top-left"></div>
                <div class="card-decoration top-right"></div>
                <div class="card-decoration bottom-left"></div>
                <div class="card-decoration bottom-right"></div>
                
                <div class="emoji">ğŸ’Œ</div>
                <h1>will you be my valentine?</h1>
                <p class="question">I know it's early, but I wanted to ask you before it's too late.</p>
                
                <div class="buttons">
                    <button class="yes-btn" onclick="sayYes()">
                        <span class="btn-shine"></span>
                        Yes, i'll be your valentine! â£ï¸
                    </button>
                    <button class="no-btn" id="no-btn" onclick="moveButton()">
                        No ğŸ’”
                    </button>
                </div>
            </div>   

            <div class="success" id="success">
                <div class="card-decoration top-left"></div>
                <div class="card-decoration top-right"></div>
                <div class="card-decoration bottom-left"></div>
                <div class="card-decoration bottom-right"></div>
                
                <div class="emoji pulse-heart">ğŸŠ</div>
                <h2>ğŸ’– you said yes! ğŸ’–</h2>
                <p>I'm so happy to be your valentine. I love you so much.</p>
                <p>Can't wait to celebrate love with you!</p>
                
                <button class="letter-btn" onclick="goToLetter()">
                    <span class="btn-shine"></span>
                    âœ‰ï¸ Read My Letter
                </button>
            </div>
        </div>
    </div>

    <!-- PAGE 2: Letter -->
    <div class="page" id="letter-page">
        <button class="back-btn" onclick="goBack()">
            <span>â†</span>
            <span>Back</span>
        </button>

        <div class="letter-container">
            <div class="envelope" id="envelope" onclick="openEnvelope()">
                <div class="envelope-flap" id="flap"></div>
                <div class="envelope-seal">ğŸ’•</div>
                <div class="envelope-base">
                    <div class="deco-heart" style="top: 20%; left: 15%;">ğŸ’–</div>
                    <div class="deco-heart" style="top: 60%; right: 20%;">ğŸ’—</div>
                </div>
            </div>

            <p class="instruction" id="instruction">âœ¨ Click the envelope to open âœ¨</p>

            <div class="letter" id="letter">
                <div class="letter-border">
                    <div class="letter-header">
                        <h1><span class="tight">My</span> Dearest Valentine</h1>
                    </div>
            
                    <div class="letter-content">
                        <p>My only baby, it's our 2nd valentine's day together! I can't wait to spend it with you and celebrate our love. I've been thinking of how will I ask you the question for the second time.</p>
                        <p>This one is special, because this is the first time I'm asking you the question in this weird website ahhahahaha.</p>
                        <p>I promised myself to ask you the question every valentine's day until we're old and grey. In my own way, I want to make you feel special and loved every year and every day.</p>
            
                        <p>You are the only valentine that I've ever wanted, and I'm so grateful to have you in my life. I love you so much.</p>
            
                        <p>I hope you like it!</p>
            
                        <div class="letter-signature">
                            With all my love,<br>
                            Your Valentine ğŸ’•
                        </div>

                        <style>
                            /* Style 2: Floating Hearts Button (Mini Version) */
                            .replay-btn-2 {
                                position: relative;
                                padding: 6px 15px; /* smaller padding */
                                background: white;
                                border: 2px solid #ff69b4; /* thinner border */
                                border-radius: 16px; /* smaller radius */
                                color: #ff1744;
                                font-size: 12px; /* smaller text */
                                font-weight: 700;
                                cursor: pointer;
                                box-shadow: 0 3px 10px rgba(255, 105, 180, 0.3); /* lighter shadow */
                                transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                                overflow: visible;
                                display: inline-flex;
                                align-items: center;
                                gap: 4px;
                            }
                            
                            .replay-btn-2 .heart {
                                position: absolute;
                                font-size: 10px; /* smaller hearts */
                                opacity: 0;
                                pointer-events: none;
                            }
                            
                            .replay-btn-2:hover {
                                background: linear-gradient(135deg, #ff69b4 0%, #ff1744 100%);
                                color: white;
                                transform: scale(1.05);
                                border-color: #ff1744;
                            }
                            
                            .replay-btn-2:hover .heart {
                                animation: floatHeart 1.5s ease-out;
                            }
                            
                            @keyframes floatHeart {
                                0% {
                                    opacity: 1;
                                    transform: translateY(0) scale(0.5);
                                }
                                100% {
                                    opacity: 0;
                                    transform: translateY(-50px) scale(1.2); /* less float distance for mini version */
                                }
                            }
                            </style>
                            
                            <button class="replay-btn-2" onclick="replayExperience(); createHearts(event)">
                                <span class="heart" style="left: 50%; top: 50%;">â¤ï¸</span>
                                <span class="heart" style="left: 30%; top: 40%;">ğŸ’•</span>
                                <span class="heart" style="left: 70%; top: 60%;">ğŸ’–</span>
                                Replay
                            </button>
                            

                    </div>
                </div>
            </div>
        </div>    
    </div>

    <script>
        let noCount = 0;
        let isEnvelopeOpen = false;

        let audioUnlocked = false;

        function unlockAllAudio() {
            if (audioUnlocked) return;
            audioUnlocked = true;

            // Unlock all audio elements
            document.querySelectorAll("audio").forEach(a => {
                a.play().then(() => a.pause()).catch(() => {});
            });

            console.log("ğŸ”“ Audio unlocked!");

            if (roseSoundPending) {
                playRoseSound();
                roseSoundPending = false;
            }
        }

        // First user interaction unlocks audio for everything
        const firstInteractionEvents = ["pointerdown", "touchstart", "mousedown", "keydown"];
        firstInteractionEvents.forEach(evt => {
            window.addEventListener(evt, unlockAllAudio, { once: true, passive: true });
        });

        let roseSoundPending = false;
        let roseSoundPlayed = false;

        function playSoundById(id) {
            const sound = document.getElementById(id);
            if (!sound) return;
            sound.currentTime = 0;
            sound.play().catch(() => {});
        }

        // â¤ï¸ Button sound for ALL buttons
        document.addEventListener("click", (event) => {
            if (!event.target.closest("button")) return;
            if (!audioUnlocked) unlockAllAudio();
            playSoundById("button-sound");
        });

        // ğŸŒ¹ Rose bloom sound
        function startBackgroundMusic() {
            const iframe = document.getElementById("bg-music");
            if (!iframe) return;
            if (!iframe.dataset.baseSrc) {
                iframe.dataset.baseSrc = iframe.src;
            }
            iframe.src = iframe.dataset.baseSrc + "&autoplay=1";
        }

        function playRoseSound() {
            if (roseSoundPlayed) return;
            playSoundById("rose-sound");
            roseSoundPlayed = true;
            startBackgroundMusic();
        }

        // Delay so roses appear gradually first
        setTimeout(() => {
            if (audioUnlocked) {
                playRoseSound();
            } else {
                roseSoundPending = true;
            }
        }, 1500);


        // Create stars
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        createStars();
        
        // Landing page navigation
        function goToQuestion() {
            document.getElementById('landing-page').classList.remove('active');
            document.getElementById('question-page').classList.add('active');
        }
        
        // Question page functions
        function moveButton() {
            const btn = document.getElementById('no-btn');
            
            // Get viewport dimensions
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const btnWidth = btn.offsetWidth;
            const btnHeight = btn.offsetHeight;
            
            const padding = 20;
            
            // Calculate truly random positions across entire viewport
            const randomX = Math.floor(Math.random() * (viewportWidth - btnWidth - padding * 2)) + padding;
            const randomY = Math.floor(Math.random() * (viewportHeight - btnHeight - padding * 2)) + padding;
            
            // Change to fixed positioning to move anywhere on screen
            btn.style.position = 'fixed';
            btn.style.left = randomX + 'px';
            btn.style.top = randomY + 'px';
            btn.style.zIndex = '999';
            
            noCount++;
            const noTexts = [
                'No ğŸ’”',
                'Are you sure? ğŸ¤”',
                'Really? ğŸ˜¢',
                'Think again! ğŸ’­',
                'Please say yes! ğŸ™',
                'I know you love me! ğŸ’•',
                'Last chance! â°',
                'Please? ğŸ˜”',
                'Pretty please? ğŸ¥º',
            ];
            
            if (noCount < noTexts.length) {
                btn.textContent = noTexts[noCount];
            }
            
            const newSize = Math.max(0.5, 1 - (noCount * 0.08));
            btn.style.transform = `scale(${newSize})`;
        }
        
        function sayYes() {
            document.getElementById('question-content').style.display = 'none';
            document.getElementById('success').style.display = 'block';

            if (audioUnlocked) {
                playConfettiSound();
                playHeartSound();
            }

            // Start background music only after audio is unlocked
            if (audioUnlocked) {
                startBackgroundMusic();
            }

            createConfetti();
            createHeartsExplosion();
        }

        
        function createConfetti() {
            const colors = ['#ff6b9d', '#ffd700', '#ff1493', '#ff69b4', '#ff85c1'];
            playConfettiSound();
            
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }
        
        function createHeartsExplosion() {
            const hearts = ['ğŸ’•', 'ğŸ’“', 'ğŸ’—', 'ğŸ’–', 'ğŸ’', 'ğŸ’›'];
            const container = document.querySelector('.container');
            const rect = container.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.className = 'heart-explosion';
                    heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                    heart.style.left = centerX + 'px';
                    heart.style.top = centerY + 'px';
                    
                    const angle = (Math.PI * 2 * i) / 20;
                    const distance = 150 + Math.random() * 100;
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    
                    heart.style.setProperty('--x', x + 'px');
                    heart.style.setProperty('--y', y + 'px');
                    
                    document.body.appendChild(heart);
                    
                    setTimeout(() => heart.remove(), 2000);
                }, i * 50);
            }
        }
        
        // Navigation functions
        function goToLetter() {
            document.getElementById('question-page').classList.remove('active');
            document.getElementById('letter-page').classList.add('active');
            
            // Auto-open envelope after 2 seconds
            setTimeout(() => {
                openEnvelope();
            }, 2000);
        }
        
        function goBack() {
            document.getElementById('letter-page').classList.remove('active');
            document.getElementById('question-page').classList.add('active');
            
            // Reset envelope
            isEnvelopeOpen = false;
            document.getElementById('flap').classList.remove('open');
            document.getElementById('letter').classList.remove('show');
            document.getElementById('instruction').classList.remove('hidden');
        }
        
        // Letter page functions
        function openEnvelope() {
            if (!isEnvelopeOpen) {
                isEnvelopeOpen = true;
                document.getElementById('flap').classList.add('open');
                document.getElementById('instruction').classList.add('hidden');
                
                setTimeout(() => {
                    document.getElementById('letter').classList.add('show');
                }, 400);
            }
        }

        function replayExperience() {
            // go back to landing page
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('landing-page').classList.add('active');

            // reset scroll
            const letter = document.querySelector('.letter');
            if (letter) letter.scrollTop = 0;

            // restart animations by reloading page
            setTimeout(() => {
                location.reload();
            }, 100);
        }

        function playConfettiSound() {
            const sound = document.getElementById("confetti-sound");
            sound.currentTime = 0;
            sound.play();
        }

        function playHeartSound() {
            const sound = document.getElementById("heart-sound");
            sound.currentTime = 0;
            sound.play();
        }


    </script>


    <!-- Sound Effects -->
    <audio id="confetti-sound" preload="auto" playsinline src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_1b661d153bc.mp3?filename=party-horn-82568.mp3"></audio>
    <audio id="heart-sound" preload="auto" playsinline src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_a72ffb39173.mp3?filename=pop-94319.mp3"></audio>
    <!-- Button Click Sound -->
    <audio id="button-sound" preload="auto" playsinline src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_1c568ceaf38.mp3?filename=click-124467.mp3"></audio>

    <!-- Rose Bloom Sound (soft magical chime) -->
    <audio id="rose-sound" preload="auto" playsinline src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_55c5518592.mp3?filename=magical-wood-81720.mp3"></audio>

    <!-- Background Music via YouTube -->
    <iframe
        id="bg-music"
        width="0"
        height="0"
        src="https://www.youtube.com/embed/FPz9GSC5QlM?loop=1&playlist=FPz9GSC5QlM"
        frameborder="0"
        allow="autoplay; encrypted-media"
    ></iframe>


</body>
</html>